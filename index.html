<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>QR Code Scanner</title>
    </head>
    <body>
        <video></video>
        <button id="scan-btn">Scan</button>

        <div id="result"></div>

        <script type="module">
            // https://github.com/nimiq/qr-scanner
            import QrScanner from "./qr-scanner.min.js";

            function $(selector) {
                return document.querySelector(selector);
            }

            const qrScanner = new QrScanner($("video"), onDetected, {
                returnDetailedScanResult: true,
            });

            function onDetected(result) {
                $("#result").innerText = result.data;
                qrScanner.stop();
            }

            function scan() {
                qrScanner.start();
            }

            $("#scan-btn").addEventListener("click", () => scan());
        </script>
    </body>
</html>
